<div th:fragment="sidebar" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <nav class="d-flex flex-column p-3 bg-light" style="width: 250px; min-height:100vh;">
    <a th:href="@{/}" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-decoration-none">
      <span class="fs-4">Johnson - Calidad</span>
    </a>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
      <li class="nav-item">
        <a th:href="@{/}" class="nav-link link-dark">Dashboard</a>
      </li>
      <li>
        <a th:href="@{/proyectos}" class="nav-link link-dark">Proyectos</a>
      </li>
      <li>
        <a th:href="@{/catalogo}" class="nav-link link-dark">Catálogo de entregables</a>
      </li>
      <li>
        <a th:href="@{/reportes}" class="nav-link link-dark">Reportes</a>
      </li>
      <li>
        <a th:href="@{/checklist}" class="nav-link link-dark">Checklist PPAP</a>
      </li>
      <li>
        <a th:href="@{/adjuntos}" class="nav-link link-dark">Archivos</a>
      </li>
    </ul>

    <hr>
    <div class="dropdown">
      <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle" id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
        <strong th:text="${#authentication?.name ?: 'Invitado'}">Usuario</strong>
      </a>
      <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser">
        <li><a class="dropdown-item" th:href="@{/perfil}">Perfil</a></li>
        <li><a class="dropdown-item" th:href="@{/mi-equipo}" sec:authorize="hasRole('ROLE_MANAGER')">Mi equipo</a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item" th:href="@{/logout}">Cerrar sesión</a></li>
      </ul>
    </div>

    <div class="mt-3">
      <small class="text-muted">Roles:</small>
      <div>
        <span class="badge bg-primary me-1">Gerente</span>
        <span class="badge bg-secondary me-1">Ingeniero</span>
        <span class="badge bg-info">Admin</span>
      </div>
    </div>
  </nav>
</div>
